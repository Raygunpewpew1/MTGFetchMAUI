<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:material="http://schemas.enisn-projects.io/dotnet/maui/uraniumui/material"
             x:Class="MTGFetchMAUI.Pages.SearchFiltersPage"
             Title="Search Filters"
             BackgroundColor="{StaticResource Background}"
             Shell.PresentationMode="ModalAnimated">

    <ContentPage.Resources>
        <ResourceDictionary>
            <OnIdiom x:Key="HeaderFontSize" x:TypeArguments="x:Double" Phone="16" Tablet="20" Desktop="20" />
            <OnIdiom x:Key="BodyFontSize" x:TypeArguments="x:Double" Phone="14" Tablet="18" Desktop="18" />
            <OnIdiom x:Key="SmallFontSize" x:TypeArguments="x:Double" Phone="12" Tablet="16" Desktop="16" />
        </ResourceDictionary>
    </ContentPage.Resources>

    <Grid RowDefinitions="*,Auto">

        <ScrollView Grid.Row="0" Padding="16">
            <VerticalStackLayout Spacing="16">

                <!-- Colors -->
                <VerticalStackLayout Spacing="8">
                    <Label Text="Colors" FontSize="{StaticResource HeaderFontSize}" FontAttributes="Bold" />
                    <FlexLayout x:Name="ColorButtons" Wrap="Wrap" JustifyContent="Start" />
                </VerticalStackLayout>

                <!-- Card Text / Keywords -->
                <material:TextField x:Name="KeywordsEntry"
                       Title="Card Text"
                       Placeholder="Search card text..."
                       BackgroundColor="{StaticResource Surface}"
                       TitleColor="{StaticResource TextSecondary}"
                       AccentColor="{StaticResource Primary}" />

                <!-- Card Type -->
                <material:PickerField x:Name="TypePicker"
                        Title="Card Type"
                        TextColor="{StaticResource TextPrimary}"
                        TitleColor="{StaticResource TextSecondary}"
                        AccentColor="{StaticResource Primary}">
                    <material:PickerField.ItemsSource>
                        <x:Array Type="{x:Type x:String}">
                            <x:String>Any</x:String>
                            <x:String>Artifact</x:String>
                            <x:String>Battle</x:String>
                            <x:String>Creature</x:String>
                            <x:String>Enchantment</x:String>
                            <x:String>Instant</x:String>
                            <x:String>Land</x:String>
                            <x:String>Planeswalker</x:String>
                            <x:String>Sorcery</x:String>
                            <x:String>Kindred</x:String>
                        </x:Array>
                    </material:PickerField.ItemsSource>
                </material:PickerField>

                <!-- Subtype -->
                <material:TextField x:Name="SubtypeEntry"
                       Title="Subtype"
                       Placeholder="e.g. Elf, Dragon..."
                       BackgroundColor="{StaticResource Surface}"
                       TitleColor="{StaticResource TextSecondary}"
                       AccentColor="{StaticResource Primary}" />

                <!-- Supertype -->
                <material:TextField x:Name="SupertypeEntry"
                       Title="Supertype"
                       Placeholder="e.g. Legendary..."
                       BackgroundColor="{StaticResource Surface}"
                       TitleColor="{StaticResource TextSecondary}"
                       AccentColor="{StaticResource Primary}" />

                <!-- Rarity -->
                <VerticalStackLayout Spacing="4">
                    <Label Text="Rarity" FontSize="{StaticResource BodyFontSize}" />
                    <FlexLayout Wrap="Wrap" JustifyContent="Start">
                        <material:CheckBox x:Name="ChkCommon" Text="Common" Color="{StaticResource Primary}" Margin="0,0,12,4" />
                        <material:CheckBox x:Name="ChkUncommon" Text="Uncommon" Color="{StaticResource Primary}" Margin="0,0,12,4" />
                        <material:CheckBox x:Name="ChkRare" Text="Rare" Color="{StaticResource Primary}" Margin="0,0,12,4" />
                        <material:CheckBox x:Name="ChkMythic" Text="Mythic" Color="{StaticResource Primary}" Margin="0,0,12,4" />
                    </FlexLayout>
                </VerticalStackLayout>

                <!-- CMC Range -->
                <VerticalStackLayout Spacing="4">
                    <Label Text="Mana Value (CMC)" FontSize="{StaticResource BodyFontSize}" />
                    <Grid ColumnDefinitions="*,Auto,*" ColumnSpacing="8">
                        <VerticalStackLayout>
                            <Label x:Name="CMCMinLabel" Text="Min: 0" FontSize="{StaticResource SmallFontSize}"
                                   TextColor="{StaticResource TextSecondary}" />
                            <Slider x:Name="CMCMinSlider" Minimum="0" Maximum="16"
                                    ValueChanged="OnCMCChanged"
                                    ThumbColor="{StaticResource Primary}"
                                    MinimumTrackColor="{StaticResource Primary}" />
                        </VerticalStackLayout>
                        <Label Grid.Column="1" Text="to" VerticalOptions="End" Margin="0,0,0,8" FontSize="{StaticResource BodyFontSize}" />
                        <VerticalStackLayout Grid.Column="2">
                            <Label x:Name="CMCMaxLabel" Text="Max: 16+" FontSize="{StaticResource SmallFontSize}"
                                   TextColor="{StaticResource TextSecondary}" />
                            <Slider x:Name="CMCMaxSlider" Minimum="0" Maximum="16" Value="16"
                                    ValueChanged="OnCMCChanged"
                                    ThumbColor="{StaticResource Primary}"
                                    MinimumTrackColor="{StaticResource Primary}" />
                        </VerticalStackLayout>
                    </Grid>
                </VerticalStackLayout>

                <!-- Power / Toughness -->
                <Grid ColumnDefinitions="*,*" ColumnSpacing="12">
                    <material:TextField x:Name="PowerEntry" Title="Power" Placeholder="e.g. 3"
                           BackgroundColor="{StaticResource Surface}" Keyboard="Numeric"
                           TitleColor="{StaticResource TextSecondary}"
                           AccentColor="{StaticResource Primary}" />
                    <material:TextField Grid.Column="1" x:Name="ToughnessEntry" Title="Toughness" Placeholder="e.g. 4"
                           BackgroundColor="{StaticResource Surface}" Keyboard="Numeric"
                           TitleColor="{StaticResource TextSecondary}"
                           AccentColor="{StaticResource Primary}" />
                </Grid>

                <!-- Format Legality -->
                <material:PickerField x:Name="FormatPicker"
                        Title="Format"
                        TextColor="{StaticResource TextPrimary}"
                        TitleColor="{StaticResource TextSecondary}"
                        AccentColor="{StaticResource Primary}" />

                <!-- Set Code -->
                <material:TextField x:Name="SetEntry" Title="Set Code" Placeholder="e.g. MH2, ZEN..."
                       BackgroundColor="{StaticResource Surface}"
                       TitleColor="{StaticResource TextSecondary}"
                       AccentColor="{StaticResource Primary}" />

                <!-- Artist -->
                <material:TextField x:Name="ArtistEntry" Title="Artist" Placeholder="Artist name..."
                       BackgroundColor="{StaticResource Surface}"
                       TitleColor="{StaticResource TextSecondary}"
                       AccentColor="{StaticResource Primary}" />

                <!-- Special Options -->
                <VerticalStackLayout Spacing="4">
                    <material:CheckBox x:Name="ChkPrimarySide" Text="Primary side only" IsChecked="True" Color="{StaticResource Primary}" Margin="0,0,0,8" />
                    <material:CheckBox x:Name="ChkNoVariations" Text="Exclude variations" Color="{StaticResource Primary}" Margin="0,0,0,8" />
                </VerticalStackLayout>

            </VerticalStackLayout>
        </ScrollView>

        <!-- Bottom buttons -->
        <Grid Grid.Row="1"
              Padding="16,8"
              ColumnDefinitions="*,*,*"
              ColumnSpacing="8"
              BackgroundColor="{StaticResource Surface}">
            <Button Text="Reset"
                    Clicked="OnResetClicked"
                    BackgroundColor="{StaticResource CardBackground}" />
            <Button Grid.Column="1"
                    Text="Cancel"
                    Clicked="OnCancelClicked"
                    BackgroundColor="{StaticResource CardBackground}" />
            <Button Grid.Column="2"
                    Text="Apply"
                    Clicked="OnApplyClicked" />
        </Grid>

    </Grid>

</ContentPage>